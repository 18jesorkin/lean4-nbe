<!DOCTYPE html>
<html>
  <head>
    <script>
      (function(){
  const {protocol:proto, host:hostName, pathname:path, search:srch, hash:hsh} = window.location;
  if (!(path.endsWith("/") || path.endsWith(".html"))) {
    window.location.replace(`${proto}//${hostName}${path}/${srch}${hsh}`);
  }
})()</script>
    <meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Normalization by Evaluation in Lean4</title><link rel="stylesheet" href="book.css">
    <script>
      
function saveCheckboxesInit() {
  for (checkbox of document.querySelectorAll('#toc input[type="checkbox"]')) {
    const value = localStorage.getItem(checkbox.id);

    // Treat the ToC toggle specially, because it should always default to
    // closed on mobile-width screens but respect user preference on desktop-width.
    if (checkbox.id === "toggle-toc" && window.matchMedia("(max-width: 700px)").matches) {
        checkbox.checked = false;
    } else if (value === "true") {
        checkbox.checked = true;
    } else if (value === "false") {
        checkbox.checked = false;
    } // if not found, do nothing

    checkbox.addEventListener("change", persistCheckbox);
  }
}

function persistCheckbox() {
  const value = this.checked; // in a handler, 'this' is the element with the handler on it
  const id = this.id;
  localStorage.setItem(this.id, value ? "true" : "false");
}

window.addEventListener("DOMContentLoaded", saveCheckboxesInit);
</script>
    <script>
      const __versoSiteRoot = "./"</script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <style>
    main .theIndex {
      padding-left: 0;
      font-family: var(--verso-text-font-family);
    }

    main .theIndex nav {
      position: sticky;
      top: 0;
      background: white;
      font-family: var(--verso-structure-font-family);
      font-size: 1.25rem;
    }

    main .theIndex nav ol {
      padding: 0;
    }

    main .theIndex nav ol li {
      display: inline-block;
    }

    main .theIndex nav ol li a {
      /* Padding instead of margin to have a bigger click target */
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
    /* Increase the size of the touch target on phones */
    @media screen and (max-width: 700px) {
      main .theIndex nav ol li a {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
      }
    }

    main .theIndex nav ol li:first-child a {
      padding-left: 0;
    }

    main .theIndex nav ol li + li:before {
      content: "|";
    }

    main .theIndex h1,
    main .theIndex h2,
    main .theIndex h3,
    main .theIndex h4,
    main .theIndex h5,
    main .theIndex h6 {
      margin-top: 0;
    }

    main .theIndex ol {
      list-style-type: none;
    }

    main .theIndex .division > ol {
      padding-left: 0;
      display: flex;
      flex-wrap: wrap;
      gap: 2rem 3rem;
      overflow-wrap: break-word;
    }

    @media screen and (max-width: 700px) {
      main .theindex .division > ol {
        flex-direction: column;
        flex-wrap: nowrap;
        gap: 1rem;
      }
    }

   main .theIndex .division > ol > li {
      margin-bottom: 0.5rem;
    }

    main .theIndex .division ol ol {
      padding-left: 1rem;
    }

    main .theIndex .division {
      break-inside: avoid;
      counter-reset: none;
      max-width: none;
      width: auto;
    }
    </style><style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
}

.hl.lean .keyword {
  font-weight : bold;
}

.hl.lean .var {
  font-style: italic;
  position: relative;
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
  font-size: inherit;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

/*
@media (hover: hover) {
  .hl.lean .has-info:hover > .hover-container > .hover-info:not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .has-info:hover > .hover-container > .hover-info,
  .hl.lean .token:hover > .hover-container > .hover-info:not(.has-info *):not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .token:hover > .hover-container > .hover-info:not(.has-info *) {
    display: inline-block;
    position: absolute;
    top: 1rem;
    font-weight: normal;
    font-style: normal;
    width: min-content;
  }
}
*/

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: 0.1rem;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error {
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error pre {
    color: red;
}

.hl.lean .has-info.warning {
  text-decoration-color: #efd871;
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color: #efd871;
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: #efd871;
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #efd871;
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.info {
  text-decoration-color: blue;
}

@media (hover: hover) {
  .hl.lean .has-info.info:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.info {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.info {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: sans-serif;
  white-space: normal;
  max-width: 40rem;
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: monospace;
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  left: 2rem;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
  z-index: 200;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: block;
}

/*
@media (hover: hover) {
  .hl.lean .tactic:hover > .tactic-toggle:not(:checked) ~ .tactic-state {
    display: block;
    position: absolute;
    left: 0;
    transform: translate(0.25rem, 0);
    z-index: 250;
  }
}
*/

.hl.lean .tactic > label {
  position: relative;
  transition: all 0.5s;
}

@media (hover: hover) {
  .hl.lean .tactic > label:hover {
    border-bottom: 1px dotted #bbbbbb;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  border-radius: 1rem;
  height: 0.25rem;
  vertical-align: middle;
  width: 0.6rem;
  margin-left: 0.1rem;
  margin-right: 0.1rem;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5rem;
}

.hl.lean .tactic-state summary {
  margin-left: -0.5rem;
}

.hl.lean .tactic-state details {
  padding-left: 0.5rem;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  width: 1rem;
  height: 1rem;
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7rem;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6rem;
  height: 0.6rem;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .tactic-state .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  margin-left: 0.5rem;
  margin-top: 0.1rem;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .tactic-state .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .tactic-state .goal-name {
  font-style: italic;
  font-family: monospace;
}

.hl.lean .tactic-state .hypotheses {
  display: table;
}

.hl.lean .tactic-state .hypothesis {
  display: table-row;
}

.hl.lean .tactic-state .hypothesis > * {
  display: table-cell;
}


.hl.lean .tactic-state .hypotheses .colon {
  text-align: center;
  min-width: 1rem;
}

.hl.lean .tactic-state .hypotheses .name {
  text-align: right;
}

.hl.lean .tactic-state .hypotheses .name,
.hl.lean .tactic-state .hypotheses .type,
.hl.lean .tactic-state .conclusion .type {
  font-family: monospace;
}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #efd871;
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}



.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

</style><script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let siteRoot = typeof __versoSiteRoot !== 'undefined' ? __versoSiteRoot : "/";
    fetch(siteRoot + "-verso-docs.json").then((resp) => resp.json()).then((versoDocData) => {

      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        theme: "lean",
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        ignoreAttributes: true,
        onShow(inst) {
          if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          content.className = "hl lean";
          content.style.display = "block";
          content.style.maxHeight = "300px";
          content.style.overflowY = "auto";
          content.style.overflowX = "hidden";
          const hoverId = tgt.dataset.versoHover;
          const hoverInfo = tgt.querySelector(".hover-info");
          if (hoverId) { // Docstrings from the table
            // TODO stop doing an implicit conversion from string to number here
            let data = versoDocData[hoverId];
            if (data) {
              const info = document.createElement("span");
              info.className = "hover-info";
              info.style.display = "block";
              info.innerHTML = data;
              content.appendChild(info);
              /* Render docstrings - TODO server-side */
              if ('undefined' !== typeof marked) {
                  for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                      const str = d.innerText;
                      const html = marked.parse(str);
                      const rendered = document.createElement("div");
                      rendered.classList.add("docstring");
                      rendered.innerHTML = html;
                      d.parentNode.replaceChild(rendered, d);
                  }
              }
            } else {
              content.innerHTML = "Failed to load doc ID: " + hoverId;
            }
          } else if (hoverInfo) { // The inline info, still used for compiler messages
            content.appendChild(hoverInfo.cloneNode(true));
          }
          return content;
        }
      };

      const addTippy = (selector, props) => {
        tippy(selector, Object.assign({}, defaultTippyProps, props));
      };
      addTippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token', {theme: 'lean'});
      addTippy('.hl.lean .has-info.warning', {theme: 'warning message'});
      addTippy('.hl.lean .has-info.info', {theme: 'info message'});
      addTippy('.hl.lean .has-info.error', {theme: 'error message'});

      tippy('.hl.lean .tactic', {
        allowHtml: true,
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        maxWidth: "none",
        onShow(inst) {
          const toggle = inst.reference.querySelector("input.tactic-toggle");
          if (toggle && toggle.checked) {
            return false;
          }
          if (blockedByTippy(inst.reference)) { return false; }
        },
        theme: "tactic",
        placement: 'bottom-start',
        content (tgt) {
          const content = document.createElement("span");
          const state = tgt.querySelector(".tactic-state").cloneNode(true);
          state.style.display = "block";
          content.appendChild(state);
          content.style.display = "block";
          content.className = "hl lean popup";
          return content;
        }
      });
  });
}
</script>
    </head>
  <body>
    <label for="toggle-toc" id="toggle-toc-click"><span class="line line1"></span><span class="line line2"></span><span class="line line3"></span></label><div class="with-toc">
      <div class="toc-backdrop" onclick="document.getElementById('toggle-toc-click')?.click()"></div>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc" checked="checked"><div class="first">
          <div class="split-tocs">
            <div class="split-toc book">
              <div class="title">
                <label for="--verso-manual-toc-----bookRoot" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-----bookRoot" checked="checked"></label><span class=""><a href="">Normalization by Evaluation in Lean4</a></span></div>
              <table><tr class="numbered"><td class="num"></td><td><a href="#Normalization-by-Evaluation-in-Lean4--Introduction">Introduction</a></td></tr><tr class="numbered"><td class="num"></td><td><a href="#Normalization-by-Evaluation-in-Lean4--Monoid-Rewriting">Monoid-Rewriting</a></td></tr><tr class="numbered"><td class="num"></td><td><a href="#Normalization-by-Evaluation-in-Lean4--GodelT-Rewriting">GodelT-Rewriting</a></td></tr><tr class="numbered"><td class="num"></td><td><a href="#index">Index</a></td></tr></table></div>
            </div>
          </div>
        <div class="last"></div>
        </nav>
      <main><section>
          <div class="titlepage">
            <h1>
              Normalization by Evaluation in Lean4</h1>
            <div class="authors">
              <span class="author">Jeremy Sorkin</span></div>
            </div>
          <section>
            <h2>
              Table of Contents</h2>
            <ol class="section-toc">
              <li>
                <a href=""><span class="number">1.</span> Introduction</a></li>
              <li>
                <a href=""><span class="number">2.</span> Monoid-Rewriting</a><ol>
                  <li>
                    <a href=""><span class="number">2.1.</span> Monoid Expressions and rewriting</a></li>
                  <li>
                    <a href=""><span class="number">2.2.</span> Normalization of Monoid-Expressions</a></li>
                  <li>
                    <a href=""><span class="number">2.3.</span> Evaluation</a></li>
                  <li>
                    <a href=""><span class="number">2.4.</span> Reification</a></li>
                  <li>
                    <a href=""><span class="number">2.5.</span> Nbe</a></li>
                  </ol>
                </li>
              <li>
                <a href=""><span class="number">3.</span> GodelT-Rewriting</a><ol>
                  <li>
                    <a href=""><span class="number">3.1.</span> GodelT Expressions and rewriting</a></li>
                  </ol>
                </li>
              <li>
                <a href=""><span class="unnumbered"></span>Index</a></li>
              </ol>
            </section>
          <section>
            <h2 id="Normalization-by-Evaluation-in-Lean4--Introduction">
              1. Introduction</h2>
            <p>
              For this project, I chose to formalize Peter Dybjer's <a href="https://www.cs.le.ac.uk/events/mgs2009/courses/courses.html#anchorPeter">Normalization-by-Evaluation</a> slides into Lean4.
My motivation for doing this was for 2 primary reasons:</p>
            <ul>
              <li>
                <p>
                  It's an interesting normalization-strategy for rewriting systems that leverages on the interplay between the "Object" and "Meta"-levels in a nontrivial manner.</p>
                </li>
              <li>
                <p>
                  It also provides a nice oppurtunity for me to further sharpen and apply my Lean4 skills</p>
                </li>
              </ul>
            <p>
              The goal of this document is to walk the reader through both Dybjer's slides and their Lean4 formalization in a step-by-step manner.
# Motivation</p>
            <p>
              Normalization by Evaluation is a technique whereby we can normalize terms of a given rewrite-system by "evaluating" them into the Meta-level (where normalization occurs)
followed by "reifying" our normalized term back into the Object-level. In this way, we will be translating our "reduction-based" rewriting-relation into a "reduction-free" equality check
that will let us show, among other results, decidability of rewriting.
As a normalization technique, has a history of application to different type systems:</p>
            <ul>
              <li>
                <p>
                  <a href="https://www.mathematik.uni-muenchen.de/~schwicht/papers/lics91/paper.pdf">Berger and Schwichtenberg (1991)</a> utilize Nbe to give a normalization-procedure for Simple Type Theory with βη-rewriting.</p>
                </li>
              <li>
                <p>
                  <a href="https://www.mathematik.uni-muenchen.de/~logik/minlog/">MINLOG proof-assistant</a> utilizes Nbe as a normalization procedure for minimal first order logic.</p>
                </li>
              <li>
                <p>
                  <a href="https://www.cse.chalmers.se/~peterd/papers/GlueingTypes93.pdf">Coquand and Dybjer 1993</a> utilize Nbe to give a decision algorithm for Combinatory logic as well as implement its
    formal correctness-proof in the ALF proof-assistant.</p>
                </li>
              <li>
                <p>
                  <a href="https://tidsskrift.dk/brics/article/view/21870">Filinski and Rohde 2005</a> extended NbE to the Untyped Lambda-Calculus using an infinitary-variant of normal-forms, Bohm Trees.</p>
                </li>
              <li>
                <p>
                  <a href="https://www.cse.chalmers.se/~peterd/papers/NbeMLTTEqualityJudgements.pdf">Abel, Dybjer, Coquand 2007</a> have extended the technique to Martin-Loff Type Theory.</p>
                </li>
              </ul>
            <p>
              For our purposes, we will focus on the simpler-examples of rewriting in Monoids and a Combinatory-version of Godel's System T.</p>
            </section>
          <section>
            <h2 id="Normalization-by-Evaluation-in-Lean4--Monoid-Rewriting">
              2. Monoid-Rewriting</h2>
            <section>
              <h3 id="Normalization-by-Evaluation-in-Lean4--Monoid-Rewriting--Monoid-Expressions-and-rewriting">
                2.1. Monoid Expressions and rewriting</h3>
              <p>
                Let’s start with the simple case where we are rewriting in a Monoid.
Our Monoid-Expressions are:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-2797" data-verso-hover="0">inductive</span> <span class="const token" data-binding="const-Exp" data-verso-hover="1">Exp</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">α</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Exp" data-verso-hover="1">Exp</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">α</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-Exp" data-verso-hover="1">Exp</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">α</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-Exp" data-verso-hover="1">Exp</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">α</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Exp.id" data-verso-hover="4">id</span>  <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Exp" data-verso-hover="1">Exp</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">α</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Exp.elem" data-verso-hover="5">elem</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">α</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-Exp" data-verso-hover="1">Exp</span> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="2">α</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.infix-2898">infix</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">100</span> <span class="literal string token" data-binding="" data-verso-hover="6">" ⬝ "</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-Exp.app" data-verso-hover="3">Exp.app</span>
<span class="unknown token" data-binding=""></span></code><p>
                That is, an expression is either:</p>
              <ul>
                <li>
                  <p>
                    Applying two expressions together: <code>e₁ ⬝ e₂</code></p>
                  </li>
                <li>
                  <p>
                    The identity element <code>id</code></p>
                  </li>
                <li>
                  <p>
                    An element of <code>α</code></p>
                  </li>
                </ul>
              <p>
                We know that a Monoid has an identity element and is associative, so we naturally get
the following rewrite-relation <code>~</code>:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-3209" data-verso-hover="0">inductive</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="2">α</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="2">α</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="sort token" data-binding="">Prop</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convr.assoc" data-verso-hover="9">assoc</span>         <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="10">e</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.30" data-verso-hover="10">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.38" data-verso-hover="10">e''</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="10">e</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.30" data-verso-hover="10">e'</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.38" data-verso-hover="10">e''</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convr.id_left" data-verso-hover="11">id_left</span>       <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exp.id" data-verso-hover="4">Exp.id</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.58" data-verso-hover="12">e</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.58" data-verso-hover="12">e</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convr.id_right" data-verso-hover="13">id_right</span>      <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="14">e</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-Exp.id" data-verso-hover="4">Exp.id</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.71" data-verso-hover="14">e</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convr.refl" data-verso-hover="15">refl</span>          <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.84" data-verso-hover="16">e</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.84" data-verso-hover="16">e</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convr.sym" data-verso-hover="17">sym</span>           <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.95" data-verso-hover="18">e</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.102" data-verso-hover="18">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.102" data-verso-hover="18">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.95" data-verso-hover="18">e</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convr.trans" data-verso-hover="19">trans</span>         <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="20">e</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.127" data-verso-hover="20">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.127" data-verso-hover="20">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.137" data-verso-hover="20">e''</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.120" data-verso-hover="20">e</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.137" data-verso-hover="20">e''</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convr.app" data-verso-hover="21">app</span>           <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.162" data-verso-hover="22">a</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.169" data-verso-hover="22">b</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.179" data-verso-hover="22">c</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.190" data-verso-hover="22">d</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-convr" data-verso-hover="7">convr</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.162" data-verso-hover="22">a</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.179" data-verso-hover="22">c</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.169" data-verso-hover="22">b</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.190" data-verso-hover="22">d</span><span class="unknown token" data-binding="">)</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.infix-3650">infix</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">100</span> <span class="literal string token" data-binding="" data-verso-hover="23">" ~ "</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-convr" data-verso-hover="24">convr</span>
<span class="unknown token" data-binding=""></span></code><p>
                The first 3 constructors are the normal Monoid-laws, the next 3 ensure <code>~</code> is an equivalence-relation, and the final ensures it is congruent wrt <code>app</code>.
This gives us the normal Monoid-behavior we expect as the following examples show:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-3926">def</span> <span class="const token" data-binding="const-zero" data-verso-hover="25">zero</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exp.id" data-verso-hover="4">Exp.id</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="const token" data-binding="const-Nat" data-verso-hover="26">Nat</span><span class="unknown token" data-binding="">)</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-3957">def</span> <span class="const token" data-binding="const-one" data-verso-hover="27">one</span>  <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-Exp.elem" data-verso-hover="5">Exp.elem</span> <span class="unknown token" data-binding="">1</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-3980">def</span> <span class="const token" data-binding="const-two" data-verso-hover="28">two</span>  <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-Exp.elem" data-verso-hover="5">Exp.elem</span> <span class="unknown token" data-binding="">2</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-4003">def</span> <span class="const token" data-binding="const-three" data-verso-hover="29">three</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-Exp.elem" data-verso-hover="5">Exp.elem</span> <span class="unknown token" data-binding="">3</span>

-- (1 ⬝ 2) ⬝ ((0 ⬝ 0) ⬝ 3) ~ 1 ⬝ (2 ⬝ (3 ⬝ 0))
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-4089">theorem</span> <span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="message warning">declaration uses 'sorry'</code><code class="message warning">declaration uses 'sorry'</code></span></span><span class="const token" data-binding="const-example1" data-verso-hover="30">example1</span></span>
        <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span> <span class="unknown token" data-binding="">⬝</span>  <span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span> <span class="unknown token" data-binding="">⬝</span>  <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span>  <span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
        <span class="unknown token" data-binding="">~</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span> <span class="unknown token" data-binding="">⬝</span>  <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span> <span class="unknown token" data-binding="">⬝</span>  <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span> <span class="unknown token" data-binding="">⬝</span>  <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="tactic"><label for="tactic-state-16391722644411813900-4222-4224"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-4222" data-verso-hover="35">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16391722644411813900-4222-4224"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">((<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span>))<span class="const token" data-binding="const-convr" data-verso-hover="24"> ~ </span>(<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)))</span></span></span></span></span>
  -- Hint:
  -- (1 ⬝ 2) ⬝ ((0 ⬝ 0) ⬝ 3) ~ (1 ⬝ 2) ⬝ (0 ⬝ 3)
  -- (1 ⬝ 2) ⬝ (0 ⬝ 3) ~ (1 ⬝ 2) ⬝ 3
  -- (1 ⬝ 2) ⬝ 3 ~ (1 ⬝ 2) ⬝ (3 ⬝ 0)
  -- (1 ⬝ 2) ⬝ (3 ⬝ 0) ~ 1 ⬝ (2 ⬝ (3 ⬝ 0))
  <span class="tactic"><label for="tactic-state-7-4450-4455"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-4450" data-verso-hover="36">sorry</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-4450-4455"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
                <a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgzgA7AEwFdjgA3AUzgFEAPMOACiXRhUSOAC44eAJ5gWASjIAfOEjA9xXHgKEjASYQduywcLh6Nh7YrjAacMfs1GklluhYg7W46YOenlWgwkrHCEEFRMUHa8Zr6yJnwxjnF6AApQEGCWSADO2RCEcADebCwA5HBl5eo+jgC+dqHhkby8LDgqPGWy7aoVpaVxrT08raXDfQPyStYA+q4AZvDFttUO2vW2KyFhEXzR3DjW3R0Vg3KWs1DAAOaoS2yr5sIbm+KNu0MnGoc0Z1NwUBY83Qm1sy0evheW3ezTkfHOSmykncoKKJSq9ieSA2bx2sLOA3iMPhhNa/xgUCQVGyaL6EzsiXWDTx8IJyW2TRJBMJemJZJJAyyvUKIiwITgNghdVBuM5/EGWHZfMIg1+RJZ/HGKr4uBOv3882AnDsAEYAAxmuAAIjgAD9rXAALwAPg5EQoZBoQLgAC8WOkxI6EgdrAyDIBUQnkXvmcDCbED9hwLjccBNnu9MAA7hAVkHvsn3AAmdMxtCAh55g4FuAAZgoAFp63wTXBALjUcELcXbLUt7bNXdrcXtLe7hbbfBr4/78lcIBAIhYnCQ4FcLbIqNefDj4yzEGOvT2fvS4yPe53qHL8g3tntvG3J14u/Gj4vLDaJ1Psi/gfXcCwkl/Rs4AACWoGBREApteBHDsBx7KcBxrIdm3HTtx14XtB0glD2zQ7tMKQu0cNg8c61sIDoNQxCiMo3C4MnPsrzgCiYLwicEKImDeDHbsGLgadfzyKAoEkIA">Try it!</a>
<a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgzgA7AEwFdjgA3AUzgFEAPMOACiXRhUSOAC44eAJ5gWASjIAfOEjA9xXHgKEjASYQduywcLh6Nh7YrjAacMfs1GklluhYg7W46YOenlWgwkrHCEEFRMUHa8Zr6yJnwxjnF6AApQEGCWSADO2RCEcADebCwA5HBl5eo+jgC+dqHhkby8LDgqPGWy7aoVpaVxrT08raXDfQPyStYA+q4AZvDFttUO2vW2KyFhEXzR3DjW3R0Vg3KWs1DAAOaoS2yr5sIbm+KNu0MnGoc0Z1NwUBY83Qm1sy0evheW3ezTkfHOSmykncoKKJSq9ieSA2bx2sLOA3iMPhhNa/xgUCQVGyaL6EzsiXWDTx8IJyW2TRJBMJemJZJJAyyvUKIiwITgNghdVBuM5/EGWHZfMIg1+RJZ/HGKr4uBOv3882AnDsAEYAAxmuAAIjgAD9rXAALwAPg5EQoZBoQLgAC8WOkxI6EgdrAyDIBUQnkXvmcDCbED9hwLjccBNnu9MAA7hAVkHvsn3AAmdMxtCAh55g4FuAAZgoAFp63wTXBALjUcELcXbLUt7bNXdrcXtLe7hbbfBr4/78lcIBAIhYnCQ4FcLbIqNefDj4yzEGOvT2fvS4yPe53qHL8g3tntvG3J14u/Gj4vLDaJ1Psi/gfXcCwkl/YRglQS1xF4U8T39Pc7V9KCExhH45iBGBAKQYCWzA8CoMg9J9x4Ms3yHPgIJOAi4VEIMEJOEC3SgHBAWBVDgLHTD716Xc8MPbCPygziyK/X9rxglo2Pw7NOKw49SNfOQ4go2itTxeigRBVA01sIC2FQSdWKod92PE58SPYmSBKEm89lEuAOPPS94KUk4EIYkFeAQ2YFhgK84E07yABYojvPSd0M6S7ME69b0C/SxLPB8yJwvc5MohzeiclS+DcmgZiuW4YBwJEQDiJitIAVgCqybLimSErM8zbysx9s2feKeNw795Ko3J8l/QhXCQSIaLU39f0bZtx07cceynAcayI3gRw7AdeF7Qdfw6dBJAUikqRpVAxxGpt5vGpaVtm4SFom9s61sdbNoQ7bqW8664FGo720u2tzuOybJz7Lzbq2ylHtQXyDrG96lt+uB+xghbeDHbsoenNbVA2wGdu8krf0XIh4DS4EgA">Solution</a></p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-6633">theorem</span> <span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="message warning">declaration uses 'sorry'</code><code class="message warning">declaration uses 'sorry'</code></span></span><span class="const token" data-binding="const-example2" data-verso-hover="37">example2</span></span>
  <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>  <span class="unknown token" data-binding="">⬝</span>  <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">~</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="tactic"><label for="tactic-state-2345987271736050022-6772-6774"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-6772" data-verso-hover="35">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2345987271736050022-6772-6774"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>))<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)))<span class="const token" data-binding="const-convr" data-verso-hover="24"> ~ </span>(<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)))</span></span></span></span></span>
  -- Hint:
  -- (0 ⬝ (1 ⬝ 0)) ⬝ ((0 ⬝  2) ⬝ (3 ⬝ 0)) ~ (1 ⬝ 0) ⬝ ((0 ⬝  2) ⬝ (3 ⬝ 0))
  -- (1 ⬝ 0) ⬝ ((0 ⬝  2) ⬝ (3 ⬝ 0)) ~ 1 ⬝ ((0 ⬝  2) ⬝ (3 ⬝ 0))
  -- 1 ⬝ ((0 ⬝  2) ⬝ (3 ⬝ 0)) ~ 1 ⬝ (2 ⬝ (3 ⬝ 0))
  <span class="tactic"><label for="tactic-state-7-7030-7035"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-7030" data-verso-hover="36">sorry</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-7030-7035"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
                <a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgzgA7AEwFdjgA3AUzgFEAPMOACiXRhUSOAC44eAJ5gWASjIAfOEjA9xXHgKEjASYQduywcLh6Nh7YrjAacMfs1GklluhYg7W46YOenlWgwkrHCEEFRMUHa8Zr6yJnwxjnF6AApQEGCWSADO2RCEcADebCwA5HBl5eo+jgC+dqHhkby8LDgqPGWy7aoVpaVxrT08raXDfQPyStYA+q4AZvDFttUO2vW2KyFhEXzR3DjW3R0Vg3KWs1DAAOaoS2yr5sIbm+KNu0MnGoc0Z1NwUBY83Qm1sy0evheW3ezTkfHOSmykncoKKJSq9ieSA2bx2sLOA3iMPhhNa/xgUCQVGyaL6EzsiXWDTx8IJyW2TRJBMJemJZJJAyyvUKIiwITgNghdVBuM5/EGWHZfMIg1+RJZ/HGKr4uBOv3882AnDsAEYAAxmuAAIjgAD9rXAALwAPg5EQoZBoQLgAC8WOkxI6EgdrAyDIBUQnkXvmcDCbED9hwLjccBNnu9MAA7hAVkHvsn3AAmdMxtCAh55g4FuAAZgoAFp63wTXBALjUcELcXbLUt7bNXdrcXtLe7hbbfBr4/78lcIBAIhYnCQ4FcLbIqNefDj4yzEGOvT2fvS4yPe53qHL8g3tntvG3J14u/Gj4vLDaJ1Psi/gfXcCwkl/YRglQS1xF4U8T39Pc7V9KCExhH45iBGBAKQYCWzA8CoMg9J9x4Ms3yHPgIJOAi4VEIMEJOEC3SgHBAWBMhG2bcdO3HHspwHGsiN4EcOwHXhe0HVDgLHTD716Xc8MPbCPyg6SyK/X9rxgloJPw7NpKw49SNfOQ4go2itTxeigRBVA02Y3jWIEoTuNUvi2PbOtbCAthUEncSqHfSTNOfEjJL0pSVJvPZ1LgKTz0veCTJOBCGJBXgENmBYYHkKzHK4hybPYyc+yvOA3MKgAWKI728nc/N06LlOvW9yp8jSzwfMicL3AzKNi3p4rMvhkpoGYrluGAcCREA4iYptrPbJyJ04mC+N4MduzyuBpxE9yAFYyvCyKWr0trgpC29wsfbNn1auTcO/QyqNyfJf0IVwkEiGiLN/Dp0EkIyKSpGlUDHD7VC+n7KWpQqXOUYHvoQ37wdQYqgbAEHYbB/7Nt/RciHgHrGMmvghOmtbv27QTx343LOKIxblrm/KZzcecKiXFcWGLLZtIgZ9ws/LTOcq5rehfctDoKk6Kpa879pFq72o639/1/ZiAAlqBgUQlamwm+OndiyfbCmVqp7L8r1oTDbp4mCoy+bSfN2beFW3XhzN8mHado7mMW/XbHd42XdHSn6d/PIoCgSQgA">Try it!</a>
<a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgzgA7AEwFdjgA3AUzgFEAPMOACiXRhUSOAC44eAJ5gWASjIAfOEjA9xXHgKEjASYQduywcLh6Nh7YrjAacMfs1GklluhYg7W46YOenlWgwkrHCEEFRMUHa8Zr6yJnwxjnF6AApQEGCWSADO2RCEcADebCwA5HBl5eo+jgC+dqHhkby8LDgqPGWy7aoVpaVxrT08raXDfQPyStYA+q4AZvDFttUO2vW2KyFhEXzR3DjW3R0Vg3KWs1DAAOaoS2yr5sIbm+KNu0MnGoc0Z1NwUBY83Qm1sy0evheW3ezTkfHOSmykncoKKJSq9ieSA2bx2sLOA3iMPhhNa/xgUCQVGyaL6EzsiXWDTx8IJyW2TRJBMJemJZJJAyyvUKIiwITgNghdVBuM5/EGWHZfMIg1+RJZ/HGKr4uBOv3882AnDsAEYAAxmuAAIjgAD9rXAALwAPg5EQoZBoQLgAC8WOkxI6EgdrAyDIBUQnkXvmcDCbED9hwLjccBNnu9MAA7hAVkHvsn3AAmdMxtCAh55g4FuAAZgoAFp63wTXBALjUcELcXbLUt7bNXdrcXtLe7hbbfBr4/78lcIBAIhYnCQ4FcLbIqNefDj4yzEGOvT2fvS4yPe53qHL8g3tntvG3J14u/Gj4vLDaJ1Psi/gfXcCwkl/YRglQS1xF4U8T39Pc7V9KCExhH45iBGBAKQYCWzA8CoMg9J9x4Ms3yHPgIJOAi4VEIMEJOEC3SgHBAWBMhG2bcdO3HHspwHGsiN4EcOwHXhe0HVDgLHTD716Xc8MPbCPyg6SyK/X9rxgloJPw7NpKw49SNfOQ4go2itTxeigRBVA02Y3jWIEoTuNUvi2PbOtbCAthUEncSqHfSTNOfEjJL0pSVJvPZ1LgKTz0veCTJOBCGJBXgENmBYYHkKzHK4hybPYyc+yvOA3MKgAWKI728nc/N06LlOvW9yp8jSzwfMicL3AzKNi3p4rMvhkpoGYrluGAcCREA4iYptrPbJyJ04mC+N4MduzyuBpxE9yAFYyvCyKWr0trgpC29wsfbNn1auTcO/QyqNyfJf0IVwkEiGiLN/Dp0EkIyKSpGlUDHD7VC+n7KWpQqXOUYHvoQ37wdQYqgbAEHYbB/7Nt/RciHgHrGMmvghOmtbv27QTx343LOKIxblrm/KZzcecKiXFcWGLLZtIgZ9ws/LTOcq5rehfctDoKk6Kpa879pFq72o639/w2wrQOI2ShZ5+S+YCpqtMu3pedqjdxca2DcOffnSKqoW9Z4XmYqaZ9+qQxY4lx9AlYsqINbNh8Ld8wWRht032sN1F7VOv2dYug7ZZuzqHYfJ2hruV2TISj2xNjCWhcjiKrcDmP9c10PQXD7PA6l63C9tzX7YiYyHYSvqup4J3UqMhKCqswm+OndiyfbCmVqp7L8v7oSh7p4mCs+mGTLh/6zV/DL5tJifZt4Va++HcfyY3rejtn0G/sKtNbGYxaB9sfeR530dKfppGUfntHCvZ5nsY7sygA">Solution</a></p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-10124">theorem</span> <span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="message warning">declaration uses 'sorry'</code><code class="message warning">declaration uses 'sorry'</code></span></span><span class="const token" data-binding="const-example3" data-verso-hover="38">example3</span></span>
  <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">~</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="tactic"><label for="tactic-state-16217592978631707266-10272-10274"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-10272" data-verso-hover="35">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16217592978631707266-10272-10274"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">((<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span>))<span class="const token" data-binding="const-convr" data-verso-hover="24"> ~ </span>((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>))<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)))</span></span></span></span></span>
  -- Hint: Use examples 1 and 2!
  <span class="tactic"><label for="tactic-state-7-10310-10315"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-10310" data-verso-hover="36">sorry</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-10310-10315"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
                <a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgzgA7AEwFdjgA3AUzgFEAPMOACiXRhUSOAC44eAJ5gWASjIAfOEjA9xXHgKEjASYQduywcLh6Nh7YrjAacMfs1GklluhYg7W46YOenlWgwkrHCEEFRMUHa8Zr6yJnwxjnF6AApQEGCWSADO2RCEcADebCwA5HBl5eo+jgC+dqHhkby8LDgqPGWy7aoVpaVxrT08raXDfQPyStYA+q4AZvDFttUO2vW2KyFhEXzR3DjW3R0Vg3KWs1DAAOaoS2yr5sIbm+KNu0MnGoc0Z1NwUBY83Qm1sy0evheW3ezTkfHOSmykncoKKJSq9ieSA2bx2sLOA3iMPhhNa/xgUCQVGyaL6EzsiXWDTx8IJyW2TRJBMJemJZJJAyyvUKIiwITgNghdVBuM5/EGWHZfMIg1+RJZ/HGKr4uBOv3882AnDsAEYAAxmuAAIjgAD9rXAALwAPg5EQoZBoQLgAC8WOkxI6EgdrAyDIBUQnkXvmcDCbED9hwLjccBNnu9MAA7hAVkHvsn3AAmdMxtCAh55g4FuAAZgoAFp63wTXBALjUcELcXbLUt7bNXdrcXtLe7hbbfBr4/78lcIBAIhYnCQ4FcLbIqNefDj4yzEGOvT2fvS4yPe53qHL8g3tntvG3J14u/Gj4vLDaJ1Psi/gfXcCwkl/YRglQS1xF4U8T39Pc7V9KCExhH45iBGBAKQYCWzA8CoMg9J9x4Ms3yHPgIJOAi4VEIMEJOEC3SgHBAWBMhG2bcdO3HHspwHGsiN4EcOwHXhe0HVDgLHTD716Xc8MPbCPyg6SyK/X9rxgloJPw7NpKw49SNfOQ4go2itTxeigRBVA02Y3jWIEoTuNUvi2PbOtbCAthUEncSqHfSTNOfEjJL0pSVJvPZ1LgKTz0veCTJOBCGJBXgENmBYYHkKzHK4hybPYyc+yvOA3MKgAWKI728nc/N06LlOvW9yp8jSzwfMicL3AzKNi3p4rMvhkpoGYrluGAcCREA4iYptrPbJyJ04mC+N4MduzyuBpxE9yAFYyvCyKWr0trgpC29wsfbNn1auTcO/QyqNyfJf0IVwkEiGiLN/Dp0EkIyKSpGlUDHD7VC+n7KWpQqXOUYHvoQ37wdQYqgbAEHYbB/7Nt/RciHgHrGMmvghOmtbv27QTx343LOKIxblrm/KZzcecKiXFcWGLLZtIgZ9ws/LTOcq5rehfctDoKk6Kpa879pFq72o639/w2wrQOI2ShZ5+S+YCpqtMu3pedqjdxca2DcOffnSKqoW9Z4XmYqaZ9+qQxY4lx9AlYsqINbNh8Ld8wWRht032sN1F7VOv2dYug7ZZuzqHYfJ2hruV2TISj2xNjCWhcjiKrcDmP9c10PQXD7PA6l63C9tzX7YiYyHYSvqup4J3UqMhKCqswm+OndiyfbCmVqp7L8v7oSh7p4mCs+mGTLh/6zV/DL5tJifZt4Va++HcfyY3rejtn0G/sKtNbGYxaB9sfeR530dKfppGUfntHCvZ5nsY7syGymzLd7H5yPEe4jzXnvASB8GZzgXCzZGLBIZgV2vnWwLRtbBwUkFX8t5UENVFubVBe0q4yyLtdH8thFbnybAACWoDAcQABVbIJQYGuBpC2KkNhCwAEJfx5CgFASQQA">Try it!</a>
<a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgzgA7AEwFdjgA3AUzgFEAPMOACiXRhUSOAC44eAJ5gWASjIAfOEjA9xXHgKEjASYQduywcLh6Nh7YrjAacMfs1GklluhYg7W46YOenlWgwkrHCEEFRMUHa8Zr6yJnwxjnF6AApQEGCWSADO2RCEcADebCwA5HBl5eo+jgC+dqHhkby8LDgqPGWy7aoVpaVxrT08raXDfQPyStYA+q4AZvDFttUO2vW2KyFhEXzR3DjW3R0Vg3KWs1DAAOaoS2yr5sIbm+KNu0MnGoc0Z1NwUBY83Qm1sy0evheW3ezTkfHOSmykncoKKJSq9ieSA2bx2sLOA3iMPhhNa/xgUCQVGyaL6EzsiXWDTx8IJyW2TRJBMJemJZJJAyyvUKIiwITgNghdVBuM5/EGWHZfMIg1+RJZ/HGKr4uBOv3882AnDsAEYAAxmuAAIjgAD9rXAALwAPg5EQoZBoQLgAC8WOkxI6EgdrAyDIBUQnkXvmcDCbED9hwLjccBNnu9MAA7hAVkHvsn3AAmdMxtCAh55g4FuAAZgoAFp63wTXBALjUcELcXbLUt7bNXdrcXtLe7hbbfBr4/78lcIBAIhYnCQ4FcLbIqNefDj4yzEGOvT2fvS4yPe53qHL8g3tntvG3J14u/Gj4vLDaJ1Psi/gfXcCwkl/YRglQS1xF4U8T39Pc7V9KCExhH45iBGBAKQYCWzA8CoMg9J9x4Ms3yHPgIJOAi4VEIMEJOEC3SgHBAWBMhG2bcdO3HHspwHGsiN4EcOwHXhe0HVDgLHTD716Xc8MPbCPyg6SyK/X9rxgloJPw7NpKw49SNfOQ4go2itTxeigRBVA02Y3jWIEoTuNUvi2PbOtbCAthUEncSqHfSTNOfEjJL0pSVJvPZ1LgKTz0veCTJOBCGJBXgENmBYYHkKzHK4hybPYyc+yvOA3MKgAWKI728nc/N06LlOvW9yp8jSzwfMicL3AzKNi3p4rMvhkpoGYrluGAcCREA4iYptrPbJyJ04mC+N4MduzyuBpxE9yAFYyvCyKWr0trgpC29wsfbNn1auTcO/QyqNyfJf0IVwkEiGiLN/Dp0EkIyKSpGlUDHD7VC+n7KWpQqXOUYHvoQ37wdQYqgbAEHYbB/7Nt/RciHgHrGMmvghOmtbv27QTx343LOKIxblrm/KZzcecKiXFcWGLLZtIgZ9ws/LTOcq5rehfctDoKk6Kpa879pFq72o639/w2wrQOI2ShZ5+S+YCpqtMu3pedqjdxca2DcOffnSKqoW9Z4XmYqaZ9+qQxY4lx9AlYsqINbNh8Ld8wWRht032sN1F7VOv2dYug7ZZuzqHYfJ2hruV2TISj2xNjCWhcjiKrcDmP9c10PQXD7PA6l63C9tzX7YiYyHYSvqup4J3UqMhKCqswm+OndiyfbCmVqp7L8v7oSh7p4mCs+mGTLh/6zV/DL5tJifZt4Va++HcfyY3rejtn0G/sKtNbGYxaB9sfeR530dKfppGUfntHCvZ5nsY7syGymzLd7H5yPEe4jzXnvASB8GZzgXCzZGLBIZgV2vnWwLRtbBwUkFX8t5UENVFubVBe0q4yyLtdH8thFbn1/jlUBADBwLXYrTTeI8n5zwdgvD+rMz5wAvvQh+09VLAPpv/a+4CqbMOPuDLGrNCyjWRJjJcxAv7AiAA">Solution</a></p>
              </section>
            <section>
              <h3 id="Normalization-by-Evaluation-in-Lean4--Monoid-Rewriting--Normalization-of-Monoid-Expressions">
                2.2. Normalization of Monoid-Expressions</h3>
              <p>
                From the examples above, we can see that showing <code>a ~ b</code> step-by-step can be rather tedious.
When checking this in practice, we simply preform all these steps simultaneously by:</p>
              <p>
                "removing all the <code>id</code>'s, shuffling parentheses to the right, then checking for equality"</p>
              <p>
                Can we implement this normalization strategy by interpreting our Monoid-Expressions in a clever way?</p>
              </section>
            <section>
              <h3 id="Normalization-by-Evaluation-in-Lean4--Monoid-Rewriting--Evaluation">
                2.3. Evaluation</h3>
              <p>
                This is exactly what evaluation does, it interprets our expressions such that normalization happens automatically at the Meta-level.
We will do this by interpreting Monoid-Expressions as functions, the "intended"-meaning:</p>
              <ul>
                <li>
                  <p>
                    <code>app</code> will be function-composition</p>
                  </li>
                <li>
                  <p>
                    <code>id</code> will be the Identity-function</p>
                  </li>
                <li>
                  <p>
                    <code>x</code> will be <code>λ e ↦ x ⬝ e</code>: Applying <code>x</code> to the left</p>
                  </li>
                </ul>
              <p>
                This gives us our evaluation function:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-14622">def</span> <span class="const token" data-binding="const-eval" data-verso-hover="39">eval</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="2">α</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="2">α</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="2">α</span><span class="unknown token" data-binding="">)</span>
  --               (eval a) ∘ (eval b)
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Exp.app" data-verso-hover="3">Exp.app</span> <span class="var token" data-binding="var-_uniq.36" data-verso-hover="40">a</span> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="40">b</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">λ</span> <span class="var token" data-binding="var-_uniq.40" data-verso-hover="40">e</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-eval" data-verso-hover="39">eval</span> <span class="var token" data-binding="var-_uniq.36" data-verso-hover="40">a</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-eval" data-verso-hover="39">eval</span> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="40">b</span> <span class="var token" data-binding="var-_uniq.40" data-verso-hover="40">e</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
  --               Identity function
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Exp.id" data-verso-hover="4">Exp.id</span>      <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-id" data-verso-hover="41">id</span>
  --               λ e ↦ x ⬝ e`
  <span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Exp.elem" data-verso-hover="5">Exp.elem</span> <span class="var token" data-binding="var-_uniq.68" data-verso-hover="42">x</span>  <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">λ</span> <span class="var token" data-binding="var-_uniq.71" data-verso-hover="40">e</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exp.elem" data-verso-hover="5">Exp.elem</span> <span class="var token" data-binding="var-_uniq.68" data-verso-hover="42">x</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.71" data-verso-hover="40">e</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
                Now, by interpreting Monoid-expressions as function-compositions at the Meta-level,
Lean will automatically normalize these compositions as the following shows:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun e =&gt; Exp.elem 1 ⬝ (Exp.elem 2 ⬝ (Exp.elem 3 ⬝ e))</code><code class="message info">fun e =&gt; Exp.elem 1 ⬝ (Exp.elem 2 ⬝ (Exp.elem 3 ⬝ e))</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.reduceCmd-15136" data-verso-hover="43">#reduce</span></span> <span class="const token" data-binding="const-eval" data-verso-hover="44">eval</span> <span class="unknown token" data-binding="">$</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="unknown token" data-binding="">)</span>

-- fun e =&gt; Exp.elem 1 ⬝ (Exp.elem 2 ⬝ (Exp.elem 3 ⬝ e))
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun e =&gt; Exp.elem 1 ⬝ (Exp.elem 2 ⬝ (Exp.elem 3 ⬝ e))</code><code class="message info">fun e =&gt; Exp.elem 1 ⬝ (Exp.elem 2 ⬝ (Exp.elem 3 ⬝ e))</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.reduceCmd-15261" data-verso-hover="43">#reduce</span></span> <span class="const token" data-binding="const-eval" data-verso-hover="44">eval</span> <span class="unknown token" data-binding="">$</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>

-- fun e =&gt; Exp.elem 1 ⬝ (Exp.elem 2 ⬝ (Exp.elem 3 ⬝ e))
<span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">fun e =&gt; Exp.elem 1 ⬝ (Exp.elem 2 ⬝ (Exp.elem 3 ⬝ e))</code><code class="message info">fun e =&gt; Exp.elem 1 ⬝ (Exp.elem 2 ⬝ (Exp.elem 3 ⬝ e))</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.reduceCmd-15408" data-verso-hover="43">#reduce</span></span> <span class="const token" data-binding="const-eval" data-verso-hover="44">eval</span> <span class="unknown token" data-binding="">$</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
                From the above examples, we see that the evaluations of</p>
              <p>
                <code>(1 ⬝ 2) ⬝ ((0 ⬝ 0) ⬝ 3) ~ (0 ⬝ (1 ~ 0)) ⬝ ((0 ⬝ 2) ⬝ (3 ⬝ 0)) ~ 1 ⬝ (2 ⬝ (3 ⬝ 0))</code></p>
              <p>
                are all equal to: <code>λ e ↦ 1 ⬝ (2 ⬝ (3 ⬝ e))</code>.</p>
              <p>
                That is, rewritable-terms give us equal evaluations:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-15778">theorem</span> <span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="message warning">declaration uses 'sorry'</code><code class="message warning">declaration uses 'sorry'</code></span></span><span class="const token" data-binding="const-convr_eval_eq" data-verso-hover="45">convr_eval_eq</span></span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.37" data-verso-hover="40">a</span> <span class="var token" data-binding="var-_uniq.39" data-verso-hover="40">b</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="2">α</span><span class="unknown token" data-binding="">}</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.43" data-verso-hover="46">h</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="40">a</span> <span class="unknown token" data-binding="">~</span> <span class="var token" data-binding="var-_uniq.39" data-verso-hover="40">b</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">∀</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="40">c</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-eval" data-verso-hover="44">eval</span> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="40">a</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="40">c</span>  <span class="unknown token" data-binding="">=</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-eval" data-verso-hover="44">eval</span> <span class="var token" data-binding="var-_uniq.39" data-verso-hover="40">b</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="40">c</span> <span class="unknown token" data-binding="">:=</span>
    <span class="tactic"><label for="tactic-state-3725563934150182832-15868-15870"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-15868" data-verso-hover="35">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-3725563934150182832-15868-15870"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.25" data-verso-hover="2">α</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.37" data-verso-hover="40">a</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.25" data-verso-hover="2">α</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.39" data-verso-hover="40">b</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.25" data-verso-hover="2">α</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.43" data-verso-hover="46">h</span></span><span class="colon">:</span><span class="type"><span class="var token" data-binding="var-_uniq.37" data-verso-hover="40">a</span><span class="const token" data-binding="const-convr" data-verso-hover="24"> ~ </span><span class="var token" data-binding="var-_uniq.39" data-verso-hover="40">b</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.32" data-verso-hover="40">c</span> : <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.25" data-verso-hover="2">α</span>), <span class="const token" data-binding="const-eval" data-verso-hover="44">eval</span> <span class="var token" data-binding="var-_uniq.37" data-verso-hover="40">a</span> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="40">c</span><span class="const token" data-binding="const-Eq" data-verso-hover="47"> = </span><span class="const token" data-binding="const-eval" data-verso-hover="44">eval</span> <span class="var token" data-binding="var-_uniq.39" data-verso-hover="40">b</span> <span class="var token" data-binding="var-_uniq.32" data-verso-hover="40">c</span></span></span></span></span></span>
    -- Hint: Induction on h
    <span class="tactic"><label for="tactic-state-7-15903-15908"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-15903" data-verso-hover="36">sorry</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-15903-15908"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
                <a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgyBaSuAMSghAC45UYYwBnJgeh8M45gEQjgCmYnmIDunATwBMABiUBOHgBMAnlgBWYqDxBJgAOwAKSdCE5jKUMQDdgtjTjAaAZhTMaArsTAjmJwAKIAHmBwABSAjcBwLHhaYGIAlGQAPnBIYFEsEVHxgEmEYZFwxaWFmXDAGnAJleXVYuhiIA0VBU1mnsDhDQCMKnAARHCAuNSjcAC8AHyVODlgFFQ0ACK1pgDk8BpihOhIDnBoIQDKYjAQtTWmnDBIpoQhntAnqC5wWpdkvgEkwTghAgpkcUAa0S6sVScBKkLK0NhcHMDGWWSQnE4IjgAG8QmItnACYT8giAL4NYGg8HRaIhSYEmEMrZbGF0iYxAkc4mpdJZWoAfVanngePqpMKFPq4qBILBMXhYCEGiZRLZaWqgqgwAA5mxcSEJeUpdKWFT5ezJgVleq+XAHJ50NL6mKjbETTLzTS0py7ZwtO1nQaiSTGu7PXLverWUivZyY3S7TAoI9OMGucSGlCKWbI774zCSnG6QmebG84n46zqktcUg4FggXA6m6PbnqTEkGysIXZR3ooQ2Sry/365NBzFG5MVb9TL1+iwhkopgA/KZzPtglZ7TxExxWCFQ3uK8pIo9kepZa21+uNjfRQDdwESZvMnAf63T907G2l0peFjcQYbrUF5wFekTiK07T9C+MRPiE97Wi0bRwOEqoahQ1DZHAa6Nkib5OvW0x7geWBkFBxiblAAoETRACOdYNlm5IxKgDT1rhMIsIAAERAgANJyX7ZDChD1MRn6kSJCTTKBWBaKBfyBCCrCgVY6ACjqEBWGmBxiEc2FkaBhAYiEGJYqJt5NnMoH1GYyYQM2NlwFheDas4VhOViUBQPJRkmTUGhCmIIrYdZzp2QwDZOS5bnAB5zpeT5FD1MZtgBQK2p6vARGzE5EUOWRzoxUEcXoJ50BJX5aUOoRL55aY9lRUVNCuSV8XSolvkpf5/rtJZSAZQKjbAKgYXSsV7llQlFVdUC/nJqmBlNgN1GNlgg2iSNAw1KgChjfUE2leV3mzalpm5Etol1AKcA3Ug60jUCgWPftQKtPpABUznZA9bGEM9qD1Y1YhOX4c4QOgdQEdFNAABJ2SwADCFX7DA6BaLc9yPCQKCmb92SmHU/0Co9x1JUAA">Try it!</a>
<a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgyBaSuAMSghAC45UYYwBnJgeh8M45gEQjgCmYnmIDunATwBMABiUBOHgBMAnlgBWYqDxBJgAOwAKSdCE5jKUMQDdgtjTjAaAZhTMaArsTAjmJwAKIAHmBwABSAjcBwLHhaYGIAlGQAPnBIYFEsEVHxgEmEYZFwxaWFmXDAGnAJleXVYuhiIA0VBU1mnsDhDQCMKnAARHCAuNSjcAC8AHyVODlgFFQ0ACK1pgDk8BpihOhIDnBoIQDKYjAQtTWmnDBIpoQhntAnqC5wWpdkvgEkwTghAgpkcUAa0S6sVScBKkLK0NhcHMDGWWSQnE4IjgAG8QmItnACYT8giAL4NYGg8HRaIhSYEmEMrZbGF0iYxAkc4mpdJZWoAfVanngePqpMKFPq4qBILBMXhYCEGiZRLZaWqgqgwAA5mxcSEJeUpdKWFT5ezJgVleq+XAHJ50NL6mKjbETTLzTS0py7ZwtO1nQaiSTGu7PXLverWUivZyY3S7TAoI9OMGucSGlCKWbI774zCSnG6QmebG84n46zqktcUg4FggXA6m6PbnqTEkGysIXZR3ooQ2Sry/365NBzFG5MVb9TL1+iwhkopgA/KZzPtglZ7TxExxWCFQ3uK8pIo9kepZa21+uNjfRQDdwESZvMnAf63T907G2l0peFjcQYbrUF5wFekTiK07T9C+MRPiE97Wi0bRwOEqoahQ1DZHAa6Nkib5OvW0x7geWBkFBxiblAAoETRACOdYNlm5IxKgDT1rhMIsIAAERAgANJyX7ZDChD1MRn6kSJCTTGQWBaKBfyBCCrAUPUjxaAKOoQFYnCgfUZjJhAnAANzZGIWLLKBhAYiEN5MaJdQCnATlIFgArAGxhAaO5bFzHpQKtEccAAFRwDQrk+UC3kef5BkMES/mcCkhDAFYwAAF4hF5kViIlyWpZgmXZG5HkKgRzYwhqzqcKAUQgugWhwAA2gRAC6/lQNIzXZR57XOp1zURb1QA">Solution</a></p>
              <p>
                In addition, we will need the following lemma relating <code>eval</code> to <code>app</code>:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-18339">theorem</span> <span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="message warning">declaration uses 'sorry'</code><code class="message warning">declaration uses 'sorry'</code></span></span><span class="const token" data-binding="const-app_eval" data-verso-hover="48">app_eval</span></span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">a</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="2">α</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">∀</span> <span class="var token" data-binding="var-_uniq.10" data-verso-hover="40">b</span><span class="unknown token" data-binding="">,</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">a</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.10" data-verso-hover="40">b</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">~</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-eval" data-verso-hover="44">eval</span> <span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">a</span> <span class="var token" data-binding="var-_uniq.10" data-verso-hover="40">b</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
    <span class="tactic"><label for="tactic-state-8518012508633045049-18408-18410"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-18408" data-verso-hover="35">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-8518012508633045049-18408-18410"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17" data-verso-hover="2">α</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">a</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="2">α</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type">∀ (<span class="var token" data-binding="var-_uniq.22" data-verso-hover="40">b</span> : <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="2">α</span>), (<span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">a</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="var token" data-binding="var-_uniq.22" data-verso-hover="40">b</span>)<span class="const token" data-binding="const-convr" data-verso-hover="24"> ~ </span><span class="const token" data-binding="const-eval" data-verso-hover="44">eval</span> <span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">a</span> <span class="var token" data-binding="var-_uniq.22" data-verso-hover="40">b</span></span></span></span></span></span>
    -- Hint: Induction on a
    <span class="tactic"><label for="tactic-state-7-18443-18448"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-18443" data-verso-hover="36">sorry</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-18443-18448"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
                <a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgyBaSuAMSghAC45UYYwBnJgeh8M45gEQjgCmYnmIDunATwBMABiUBOHgBMAnlgBWYqDxBJgAOwAKSdCE5jKUMQDdgtjTjAaAZhTMaArsTAjmJwAKIAHmBwABSAjcBwLHhaYGIAlGQAPnBIYFEsEVHxgEmEYZFwxaWFmXDAGnAJleXVYuhiIA0VBU1mnsDhDQCMKnAARHCAuNSjcAC8AHyVODlgFFQ0ACK1pgDk8BpihOhIDnBoIQDKYjAQtTWmnDBIpoQhntAnqC5wWpdkvgEkwTghAgpkcUAa0S6sVScBKkLK0NhcHMDGWWSQnE4IjgAG8QmItnACYT8giAL4NYGg8HRaIhSYEmEMrZbGF0iYxAkc4mpdJZWoAfVanngePqpMKFPq4qBILBMXhYCEGiZRLZaWqgqgwAA5mxcSEJeUpdKWFT5ezJgVleq+XAHJ50NL6mKjbETTLzTS0py7ZwtO1nQaiSTGu7PXLverWUivZyY3S7TAoI9OMGucSGlCKWbI774zCSnG6QmebG84n46zqktcUg4FggXA6m6PbnqTEkGysIXZR3ooQ2Sry/365NBzFG5MVb9TL1+iwhkopgA/KZzPtglZ7TxExxWCFQ3uK8pIo9kepZa21+uNjfRQDdwESZvMnAf63T907G2l0peFjcQYbrUF5wFekTiK07T9C+MRPiE97Wi0bRwOEqoahQ1DZHAa6Nkib5OvW0x7geWBkFBxiblAAoETRACOdYNlm5IxKgDT1rhMIsIAAERAgANJyX7ZDChD1MRn6kSJCTTGQWBaKBfyBCCrCgY8WgCjqEBWJwoH1GYyYQJwADc2RiFiyygYQGIhDeTGiXUApwI5SBYAKwBsYQGhuWxcy6UCrRHHAABUcA0C53lAl57l+fpDBEn5nApIQwBWMAABeISeRFYgJUlKWYBl2Sue5CoEc2MIas6nCgFEILoFocAANoEQAun5UDSE1WXuW1zodU14U9ZhNC8VgAljkxa4SYRDbpBR9ZLDRQnRPWbpcXAo0CStHI9jhgnvrN0myfJemmP4SmmNklnWdkuRNnUhARVFPmzDFpgGQ2fl+HOEDoHUBF+VhAAS+kNAAwtADjEPVtz3I8JAoJlEWPHUz0JZD8nXbYNR1L5zpYXg2rOFY6NQFAmP1FZ2PIe0RGvfjNCE0E+Wk+TQA">Try it!</a>
<a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgyBaSuAMSghAC45UYYwBnJgeh8M45gEQjgCmYnmIDunATwBMABiUBOHgBMAnlgBWYqDxBJgAOwAKSdCE5jKUMQDdgtjTjAaAZhTMaArsTAjmJwAKIAHmBwABSAjcBwLHhaYGIAlGQAPnBIYFEsEVHxgEmEYZFwxaWFmXDAGnAJleXVYuhiIA0VBU1mnsDhDQCMKnAARHCAuNSjcAC8AHyVODlgFFQ0ACK1pgDk8BpihOhIDnBoIQDKYjAQtTWmnDBIpoQhntAnqC5wWpdkvgEkwTghAgpkcUAa0S6sVScBKkLK0NhcHMDGWWSQnE4IjgAG8QmItnACYT8giAL4NYGg8HRaIhSYEmEMrZbGF0iYxAkc4mpdJZWoAfVanngePqpMKFPq4qBILBMXhYCEGiZRLZaWqgqgwAA5mxcSEJeUpdKWFT5ezJgVleq+XAHJ50NL6mKjbETTLzTS0py7ZwtO1nQaiSTGu7PXLverWUivZyY3S7TAoI9OMGucSGlCKWbI774zCSnG6QmebG84n46zqktcUg4FggXA6m6PbnqTEkGysIXZR3ooQ2Sry/365NBzFG5MVb9TL1+iwhkopgA/KZzPtglZ7TxExxWCFQ3uK8pIo9kepZa21+uNjfRQDdwESZvMnAf63T907G2l0peFjcQYbrUF5wFekTiK07T9C+MRPiE97Wi0bRwOEqoahQ1DZHAa6Nkib5OvW0x7geWBkFBxiblAAoETRACOdYNlm5IxKgDT1rhMIsIAAERAgANJyX7ZDChD1MRn6kSJCTTGQWBaKBfyBCCrCgY8WgCjqEBWJwoH1GYyYQJwADc2RiFiyygYQGIhDeTGiXUApwI5SBYAKwBsYQGhuWxcy6UCrRHHAABUcA0C53lAl57l+fpDBEn5nApIQwBWMAABeISeRFYgJUlKWYBl2Sue5CoEc2MIas6nCgFEILoFocAANoEQAun5UDSE1WXuW1zodU14U9ZhNC8VgAljkxa4SYRDbpBR9ZLDRQnRPWbpcXAo0CStHI9jhgnvrN0myfJemmP4SmmNklnWdkuRNnUhARVFPmzDFpgGQ2fl+HOEDoHUBG5fs+XpSEz2fVVeWpYVj0ldNzazX5qBIICqDLiwtKidOqq7VNmMxHUkw9lxxFeosmIiO1Yi9KYIQDpGODJqmrDLgA/AKf7SgcYiBajiPIyEqMQnj0QE7NMK4xycN1ET0lUYsd109SOAOugQ7eRz9QOmYtOk4zdzM3AbMa/53PgrzzpiOERDwDDqAUPUVm2DUdS+c6sUQOD0qW9bcuCsKMD20CN3Ie0rvSu7nv1N7xByyrQA">Solution</a></p>
              </section>
            <section>
              <h3 id="Normalization-by-Evaluation-in-Lean4--Monoid-Rewriting--Reification">
                2.4. Reification</h3>
              <p>
                Now that we can evaluate out Monoid-expressions such that they're normalized at the Meta-level, how do we bring them back down to the object-level such that we don't change the "behavior" (wrt <code>~</code>)?
Well, for a given <code>e : Exp α</code>, we intuitively know that <code>eval e : Exp α → Exp α</code> will have the form:</p>
              <p>
                <code>λ e' ↦ elem x₁ ⬝ (elem x₂ ⬝ ... ⬝ (elem xₙ ⬝ e'))</code></p>
              <p>
                So to reify it back down while retaining its <code>~</code>-behavior, simply apply <code>Exp.id</code> to the end:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-21622">def</span> <span class="const token" data-binding="const-reify" data-verso-hover="49">reify</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.29" data-verso-hover="50">f</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="2">α</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="2">α</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="2">α</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span> <span class="var token" data-binding="var-_uniq.29" data-verso-hover="50">f</span> <span class="const token" data-binding="const-Exp.id" data-verso-hover="4">Exp.id</span>
<span class="unknown token" data-binding=""></span></code></section>
            <section>
              <h3 id="Normalization-by-Evaluation-in-Lean4--Monoid-Rewriting--Nbe">
                2.5. Nbe</h3>
              <p>
                With our two main functions in place, we are finally ready to define our <code>nbe</code>-algorithm:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.definition-21791">def</span> <span class="const token" data-binding="const-nbe" data-verso-hover="51">nbe</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.26" data-verso-hover="40">e</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="2">α</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="2">α</span> <span class="unknown token" data-binding="">:=</span> <span class="const token" data-binding="const-reify" data-verso-hover="52">reify</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-eval" data-verso-hover="44">eval</span> <span class="var token" data-binding="var-_uniq.26" data-verso-hover="40">e</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding=""></span></code><p>
                What <code>nbe</code> does is first evaluate <code>e</code> so it gets normalized through function-composition, and then reify's it back into a canonical element of <code>[e]~</code>.
Thus, we can translate <code>a ~ b</code> into the decidable-problem <code>nbe a = nbe b</code> which we state as our main correctness-theorem:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-22126">theorem</span> <span class="has-info warning"><span class="hover-container"><span class="hover-info messages"><code class="message warning">declaration uses 'sorry'</code><code class="message warning">declaration uses 'sorry'</code></span></span><span class="const token" data-binding="const-correctness" data-verso-hover="53">correctness</span></span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">e</span> <span class="var token" data-binding="var-_uniq.29" data-verso-hover="40">e'</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.4" data-verso-hover="2">α</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">e</span> <span class="unknown token" data-binding="">~</span> <span class="var token" data-binding="var-_uniq.29" data-verso-hover="40">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">↔</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-nbe" data-verso-hover="54">nbe</span> <span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">e</span> <span class="unknown token" data-binding="">=</span> <span class="const token" data-binding="const-nbe" data-verso-hover="54">nbe</span> <span class="var token" data-binding="var-_uniq.29" data-verso-hover="40">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
    <span class="tactic"><label for="tactic-state-7788317685972935967-22201-22203"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-22201" data-verso-hover="35">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7788317685972935967-22201-22203"><span class="tactic-state"><span class="goal"><span class="hypotheses"><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.17" data-verso-hover="2">α</span></span><span class="colon">:</span><span class="type"><span class="sort token" data-binding="">Type</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">e</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="2">α</span></span></span><span class="hypothesis"><span class="name"><span class="var token" data-binding="var-_uniq.29" data-verso-hover="40">e'</span></span><span class="colon">:</span><span class="type"><span class="const token" data-binding="const-Exp" data-verso-hover="8">Exp</span> <span class="var token" data-binding="var-_uniq.17" data-verso-hover="2">α</span></span></span></span><span class="conclusion"><span class="prefix">⊢ </span><span class="type"><span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">e</span><span class="const token" data-binding="const-convr" data-verso-hover="24"> ~ </span><span class="var token" data-binding="var-_uniq.29" data-verso-hover="40">e'</span><span class="const token" data-binding="const-Iff" data-verso-hover="55"> ↔ </span><span class="const token" data-binding="const-nbe" data-verso-hover="54">nbe</span> <span class="var token" data-binding="var-_uniq.27" data-verso-hover="40">e</span><span class="const token" data-binding="const-Eq" data-verso-hover="47"> = </span><span class="const token" data-binding="const-nbe" data-verso-hover="54">nbe</span> <span class="var token" data-binding="var-_uniq.29" data-verso-hover="40">e'</span></span></span></span></span></span> <span class="tactic"><label for="tactic-state-7-22204-22209"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.tacticSorry-22204" data-verso-hover="36">sorry</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-22204-22209"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code><p>
                <a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgyBaSuAMSghAC45UYYwBnJgeh8M45gEQjgCmYnmIDunATwBMABiUBOHgBMAnlgBWYqDxBJgAOwAKSdCE5jKUMQDdgtjTjAaAZhTMaArsTAjmJwAKIAHmBwABSAjcBwLHhaYGIAlGQAPnBIYFEsEVHxgEmEYZFwxaWFmXDAGnAJleXVYuhiIA0VBU1mnsDhDQCMKnAARHCAuNSjcAC8AHyVODlgFFQ0ACK1pgDk8BpihOhIDnBoIQDKYjAQtTWmnDBIpoQhntAnqC5wWpdkvgEkwTghAgpkcUAa0S6sVScBKkLK0NhcHMDGWWSQnE4IjgAG8QmItnACYT8giAL4NYGg8HRaIhSYEmEMrZbGF0iYxAkc4mpdJZWoAfVanngePqpMKFPq4qBILBMXhYCEGiZRLZaWqgqgwAA5mxcSEJeUpdKWFT5ezJgVleq+XAHJ50NL6mKjbETTLzTS0py7ZwtO1nQaiSTGu7PXLverWUivZyY3S7TAoI9OMGucSGlCKWbI774zCSnG6QmebG84n46zqktcUg4FggXA6m6PbnqTEkGysIXZR3ooQ2Sry/365NBzFG5MVb9TL1+iwhkopgA/KZzPtglZ7TxExxWCFQ3uK8pIo9kepZa21+uNjfRQDdwESZvMnAf63T907G2l0peFjcQYbrUF5wFekTiK07T9C+MRPiE97Wi0bRwOEqoahQ1DZHAa6Nkib5OvW0x7geWBkFBxiblAAoETRACOdYNlm5IxKgDT1rhMIsIAAERAgANJyX7ZDChD1MRn6kSJCTTGQWBaKBfyBCCrCgY8WgCjqEBWJwoH1GYyYQJwADc2RiFiyygYQGIhDeTGiXUApwI5SBYAKwBsYQGhuWxcy6UCrRHHAABUcA0C53lAl57l+fpDBEn5nApIQwBWMAABeISeRFYgJUlKWYBl2Sue5CoEc2MIas6nCgFEILoFocAANoEQAun5UDSE1WXuW1zodU14U9ZhNC8VgAljkxa4SYRDbpBR9ZLDRQnRPWbpcXAo0CStHI9jhgnvrN0myfJemmP4SmmNklnWdkuRNnUhARVFPmzDFpgGQ2fl+HOEDoHUBG5fs+XpSEz2fVVeWpYVj0ldNzazX5qBIICqDLiwtKidOqq7VNmMxHUkw9lxxFeosmIiO1Yi9KYIQDpGODJqmrDLgA/AKf7SgcYiBajiPIyEqMQnj0QE7NMK4xycN1ET0lUYsd109SOAOugQ7eRz9QOmYtOk4zdzM3AbMa/53PgrzzpiOERDwDDqAUPUVm2DUdS+c6sUQOD0qW9bcuCsKMD20CN3Ie0rvSu7nv1N7xByyrFA7vaYjAJ4DXRLubpngi60noiTDEbu1ogWQCemFgtOGmG61QrLDjJ6nZUYVhZyoBAsjNkDGgucAmAwA1EC7iEa4EmQpzQChwJQA4xA05inIhsxhTZ4PIYwoAKYQxKX+IzHAm8r0dcmqbk9VwAAkp4nhCO9DCgQA7bcH1227Z3/MIl2P9KakaVp6A6UGpnmX5R2IRwDyyiLee62QBTUUbI9aiDknIvj8g7AK4IQphSgQKGBGCNBINCjQAAEvpFgABVJ2XolpWHorgrEk95K3zgN9V4f0d5l0TnXN6D8lB+SwoQ96JCnaC0eHURaAMqrQCgFoIAA">Try it!</a>
<a href="https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMB0AVJAYxmEICgyBaSuAMSghAC45UYYwBnJgeh8M45gEQjgCmYnmIDunATwBMABiUBOHgBMAnlgBWYqDxBJgAOwAKSdCE5jKUMQDdgtjTjAaAZhTMaArsTAjmJwAKIAHmBwABSAjcBwLHhaYGIAlGQAPnBIYFEsEVHxgEmEYZFwxaWFmXDAGnAJleXVYuhiIA0VBU1mnsDhDQCMKnAARHCAuNSjcAC8AHyVODlgFFQ0ACK1pgDk8BpihOhIDnBoIQDKYjAQtTWmnDBIpoQhntAnqC5wWpdkvgEkwTghAgpkcUAa0S6sVScBKkLK0NhcHMDGWWSQnE4IjgAG8QmItnACYT8giAL4NYGg8HRaIhSYEmEMrZbGF0iYxAkc4mpdJZWoAfVanngePqpMKFPq4qBILBMXhYCEGiZRLZaWqgqgwAA5mxcSEJeUpdKWFT5ezJgVleq+XAHJ50NL6mKjbETTLzTS0py7ZwtO1nQaiSTGu7PXLverWUivZyY3S7TAoI9OMGucSGlCKWbI774zCSnG6QmebG84n46zqktcUg4FggXA6m6PbnqTEkGysIXZR3ooQ2Sry/365NBzFG5MVb9TL1+iwhkopgA/KZzPtglZ7TxExxWCFQ3uK8pIo9kepZa21+uNjfRQDdwESZvMnAf63T907G2l0peFjcQYbrUF5wFekTiK07T9C+MRPiE97Wi0bRwOEqoahQ1DZHAa6Nkib5OvW0x7geWBkFBxiblAAoETRACOdYNlm5IxKgDT1rhMIsIAAERAgANJyX7ZDChD1MRn6kSJCTTGQWBaKBfyBCCrCgY8WgCjqEBWJwoH1GYyYQJwADc2RiFiyygYQGIhDeTGiXUApwI5SBYAKwBsYQGhuWxcy6UCrRHHAABUcA0C53lAl57l+fpDBEn5nApIQwBWMAABeISeRFYgJUlKWYBl2Sue5CoEc2MIas6nCgFEILoFocAANoEQAun5UDSE1WXuW1zodU14U9ZhNC8VgAljkxa4SYRDbpBR9ZLDRQnRPWbpcXAo0CStHI9jhgnvrN0myfJemmP4SmmNklnWdkuRNnUhARVFPmzDFpgGQ2fl+HOEDoHUBG5fs+XpSEz2fVVeWpYVj0ldNzazX5qBIICqDLiwtKidOqq7VNmMxHUkw9lxxFeosmIiO1Yi9KYIQDpGODJqmrDLgA/AKf7SgcYiBajiPIyEqMQnj0QE7NMK4xycN1ET0lUYsd109SOAOugQ7eRz9QOmYtOk4zdzM3AbMa/53PgrzzpiOERDwDDqAUPUVm2DUdS+c6sUQOD0qW9bcuCsKMD20CN3Ie0rvSu7nv1N7xByyrFA7vaYjAJ4DXRLubpngi60noiTDEbu1ogWQCemFgtOGmG61QrLDjJ6nZUYVhZyoBAsjNkDGgucAmAwA1EC7iEa4EmQpzQChwJQA4xA05inIhsxhTZ4PIYwoAKYQxKX+IzHAm8r0dcmqbk9VwAAkp4nhCO9DCgQA7bcH1227Z3/MIl2P9KakaVp6A6UGpnmX5R2IRwDyyiLee62QBTUUbI9aiDknIvj8g7AK4IQphSgQKGBGCNBINYPzbIsDMEtk7ByCcU0pzlVlqTG8GCsFwNwdHG2kYlpWHogQ2hdRC44NvnAb6rw/o7zLonOub0H5KD5ijAYDRl6WgAsOPOMRSb+naKTLUuo2DGy1jTRR9M9ZplQFIo2gCUGsAGBIgWUj0b0jkeLUqQkfRcOJrdMALCnQhC4ZTamOtdEpn1gYw27NjGm1MZTaQ2oYAhEaqjXqnMTHm2lEjFGaM7EHkZDYvaJYOSOKofTZRnZciuPno4zx2sdFKz0QbIxzouY83ERbK2MdVFeW1HqGAQA">Solution</a></p>
              <p>
                With <code>correctness</code> in place, Lean can now instantly decide any <code>a ~ b</code> problem through reflexivity, i.e.:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-26060">theorem</span> <span class="const token" data-binding="const-example1'" data-verso-hover="56">example1'</span>
        <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span>  <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="unknown token" data-binding="">)</span>
        <span class="unknown token" data-binding="">~</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="tactic"><label for="tactic-state-16391722644411813900-26187-26189"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-26187" data-verso-hover="35">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16391722644411813900-26187-26189"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">((<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span>))<span class="const token" data-binding="const-convr" data-verso-hover="24"> ~ </span>(<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)))</span></span></span></span></span>
  /- Try this:
    exact (correctness ((one ⬝ two) ⬝ ((zero ⬝ zero) ⬝ three)) (one ⬝ (two ⬝ (three ⬝ zero)))).mpr rfl
  -/
  <span class="tactic"><label for="tactic-state-7-26329-26335"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">Try this: exact example1</code><code class="message info">Try this: exact example1</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.exact?-26329" data-verso-hover="57">exact?</span></span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-26329-26335"><span class="tactic-state">All goals completed! 🐙</span></span>

-- (0 ⬝ (1 ⬝ 0)) ⬝ ((0 ⬝  2) ⬝ (3 ⬝ 0)) ~ 1 ⬝ (2 ⬝ (3 ⬝ 0))
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-26415">theorem</span> <span class="const token" data-binding="const-example2'" data-verso-hover="58">example2'</span>
  <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">~</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="tactic"><label for="tactic-state-2345987271736050022-26551-26553"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-26551" data-verso-hover="35">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-2345987271736050022-26551-26553"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>))<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)))<span class="const token" data-binding="const-convr" data-verso-hover="24"> ~ </span>(<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)))</span></span></span></span></span>
  /- Try this:
    exact (correctness ((zero ⬝ (one ⬝ zero)) ⬝ ((zero ⬝ two) ⬝ (three ⬝ zero)))
      (one ⬝ (two ⬝ (three ⬝ zero)))).mpr rfl
  -/
  <span class="tactic"><label for="tactic-state-7-26721-26727"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">Try this: exact example2</code><code class="message info">Try this: exact example2</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.exact?-26721" data-verso-hover="57">exact?</span></span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-26721-26727"><span class="tactic-state">All goals completed! 🐙</span></span>

-- (1 ⬝ 2) ⬝ ((0 ⬝ 0) ⬝ 3) ~ (0 ⬝ (1 ⬝ 0)) ⬝ ((0 ⬝  2) ⬝ (3 ⬝ 0))
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.theorem-26815">theorem</span> <span class="const token" data-binding="const-example3'" data-verso-hover="59">example3'</span>
  <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span>  <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="unknown token" data-binding="">)</span>
  <span class="unknown token" data-binding="">~</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-two" data-verso-hover="32">two</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="unknown token" data-binding="">.</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3">app</span> <span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:=</span>
  <span class="tactic"><label for="tactic-state-16217592978631707266-26961-26963"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Term.byTactic-26961" data-verso-hover="35">by</span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-16217592978631707266-26961-26963"><span class="tactic-state"><span class="goal"><span class="conclusion"><span class="prefix">⊢ </span><span class="type">((<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-three" data-verso-hover="34">three</span>))<span class="const token" data-binding="const-convr" data-verso-hover="24"> ~ </span>((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-one" data-verso-hover="31">one</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>))<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>((<span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-two" data-verso-hover="32">two</span>)<span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span>(<span class="const token" data-binding="const-three" data-verso-hover="34">three</span><span class="const token" data-binding="const-Exp.app" data-verso-hover="3"> ⬝ </span><span class="const token" data-binding="const-zero" data-verso-hover="33">zero</span>)))</span></span></span></span></span>
  /- Try this:
    exact (correctness ((one ⬝ two) ⬝ ((zero ⬝ zero) ⬝ three))
      ((zero ⬝ (one ⬝ zero)) ⬝ ((zero ⬝ two) ⬝ (three ⬝ zero)))).mpr rfl
  -/
  <span class="tactic"><label for="tactic-state-7-27142-27148"><span class="has-info info"><span class="hover-container"><span class="hover-info messages"><code class="message info">Try this: exact example3</code><code class="message info">Try this: exact example3</code></span></span><span class="keyword token" data-binding="kw-occ-Lean.Parser.Tactic.exact?-27142" data-verso-hover="57">exact?</span></span></label><input type="checkbox" class="tactic-toggle" id="tactic-state-7-27142-27148"><span class="tactic-state">All goals completed! 🐙</span></span>
<span class="unknown token" data-binding=""></span></code></section>
            </section>
          <section>
            <h2 id="Normalization-by-Evaluation-in-Lean4--GodelT-Rewriting">
              3. GodelT-Rewriting</h2>
            <section>
              <h3 id="Normalization-by-Evaluation-in-Lean4--GodelT-Rewriting--GodelT-Expressions-and-rewriting">
                3.1. GodelT Expressions and rewriting</h3>
              <p>
                We now move on to a Combinatory-version of Godel's System T and implement NbE for it as well.
Here we will be using an Intrinsic encoding (aka "typing ala Church") meaning all Expressions will be well-typed and we won't need an additional "Derivation" type.
First, we define our Simple-Types:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-27510" data-verso-hover="0">inductive</span> <span class="const token" data-binding="const-Ty" data-verso-hover="60">Ty</span> <span class="unknown token" data-binding="">:</span> <span class="sort token" data-binding="">Type</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Ty.Nat" data-verso-hover="61">Nat</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Ty" data-verso-hover="60">Ty</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-Ty.arrow" data-verso-hover="62">arrow</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Ty" data-verso-hover="60">Ty</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-Ty" data-verso-hover="60">Ty</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-Ty" data-verso-hover="60">Ty</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-27568" data-verso-hover="63">open</span> <span class="unknown token" data-binding="">Ty</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.infixr-27576">infixr</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">100</span> <span class="literal string token" data-binding="" data-verso-hover="64">" ⇒' "</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-Ty.arrow" data-verso-hover="62">arrow</span>
<span class="unknown token" data-binding=""></span></code><p>
                Here our base-type is the Natural Numbers while <code>arrow</code> lets us form functions between Simple Types.
Our Expressions are:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-27741" data-verso-hover="0">inductive</span> <span class="const token" data-binding="const-ExpT" data-verso-hover="65">ExpT</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Ty" data-verso-hover="66">Ty</span> <span class="unknown token" data-binding="">→</span> <span class="sort token" data-binding="">Type</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-ExpT.K" data-verso-hover="67">K</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.7" data-verso-hover="68">a</span> <span class="var token" data-binding="var-_uniq.9" data-verso-hover="68">b</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Ty" data-verso-hover="66">Ty</span><span class="unknown token" data-binding="">}</span>     <span class="unknown token" data-binding="">:</span>  <span class="const token" data-binding="const-ExpT" data-verso-hover="65">ExpT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.7" data-verso-hover="68">a</span> <span class="unknown token" data-binding="">⇒'</span> <span class="var token" data-binding="var-_uniq.9" data-verso-hover="68">b</span> <span class="unknown token" data-binding="">⇒'</span> <span class="var token" data-binding="var-_uniq.7" data-verso-hover="68">a</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-ExpT.S" data-verso-hover="69">S</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.14" data-verso-hover="68">a</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="68">b</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="68">c</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Ty" data-verso-hover="66">Ty</span><span class="unknown token" data-binding="">}</span>   <span class="unknown token" data-binding="">:</span>  <span class="const token" data-binding="const-ExpT" data-verso-hover="65">ExpT</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.14" data-verso-hover="68">a</span> <span class="unknown token" data-binding="">⇒'</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="68">b</span> <span class="unknown token" data-binding="">⇒'</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="68">c</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⇒'</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.14" data-verso-hover="68">a</span> <span class="unknown token" data-binding="">⇒'</span> <span class="var token" data-binding="var-_uniq.16" data-verso-hover="68">b</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⇒'</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.14" data-verso-hover="68">a</span> <span class="unknown token" data-binding="">⇒'</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="68">c</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-ExpT.App" data-verso-hover="70">App</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.24" data-verso-hover="68">a</span> <span class="var token" data-binding="var-_uniq.26" data-verso-hover="68">b</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Ty" data-verso-hover="66">Ty</span><span class="unknown token" data-binding="">}</span>   <span class="unknown token" data-binding="">:</span>  <span class="const token" data-binding="const-ExpT" data-verso-hover="65">ExpT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.24" data-verso-hover="68">a</span> <span class="unknown token" data-binding="">⇒'</span> <span class="var token" data-binding="var-_uniq.26" data-verso-hover="68">b</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-ExpT" data-verso-hover="65">ExpT</span> <span class="var token" data-binding="var-_uniq.24" data-verso-hover="68">a</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-ExpT" data-verso-hover="65">ExpT</span> <span class="var token" data-binding="var-_uniq.26" data-verso-hover="68">b</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-ExpT.zero" data-verso-hover="71">zero</span>             <span class="unknown token" data-binding="">:</span>  <span class="const token" data-binding="const-ExpT" data-verso-hover="65">ExpT</span> <span class="const token" data-binding="const-Ty.Nat" data-verso-hover="61">.Nat</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-ExpT.succ" data-verso-hover="72">succ</span>             <span class="unknown token" data-binding="">:</span>  <span class="const token" data-binding="const-ExpT" data-verso-hover="65">ExpT</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Ty.Nat" data-verso-hover="61">.Nat</span> <span class="unknown token" data-binding="">⇒'</span> <span class="const token" data-binding="const-Ty.Nat" data-verso-hover="61">.Nat</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-ExpT.recN" data-verso-hover="73">recN</span> <span class="unknown token" data-binding="">{</span><span class="var token" data-binding="var-_uniq.43" data-verso-hover="68">a</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-Ty" data-verso-hover="66">Ty</span><span class="unknown token" data-binding="">}</span>    <span class="unknown token" data-binding="">:</span>  <span class="const token" data-binding="const-ExpT" data-verso-hover="65">ExpT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.43" data-verso-hover="68">a</span> <span class="unknown token" data-binding="">⇒'</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-Ty.Nat" data-verso-hover="61">.Nat</span> <span class="unknown token" data-binding="">⇒'</span> <span class="var token" data-binding="var-_uniq.43" data-verso-hover="68">a</span> <span class="unknown token" data-binding="">⇒'</span> <span class="var token" data-binding="var-_uniq.43" data-verso-hover="68">a</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">⇒'</span> <span class="const token" data-binding="const-Ty.Nat" data-verso-hover="61">.Nat</span> <span class="unknown token" data-binding="">⇒'</span> <span class="var token" data-binding="var-_uniq.43" data-verso-hover="68">a</span><span class="unknown token" data-binding="">)</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.open-28104" data-verso-hover="63">open</span> <span class="unknown token" data-binding="">ExpT</span>
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.infixl-28114">infixl</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">100</span> <span class="literal string token" data-binding="" data-verso-hover="6">" ⬝ "</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-ExpT.App" data-verso-hover="70">App</span>
<span class="unknown token" data-binding=""></span></code><p>
                That is, our Expressions are either:</p>
              <ul>
                <li>
                  <p>
                    Combinators <code>K</code> and <code>S</code></p>
                  </li>
                <li>
                  <p>
                    Applying two expressions together: <code>e₁ ⬝ e₂</code></p>
                  </li>
                <li>
                  <p>
                    The Natural number <code>zero</code></p>
                  </li>
                <li>
                  <p>
                    The successor function <code>succ</code></p>
                  </li>
                <li>
                  <p>
                    The recursor for Natural numbers: <code>recN</code></p>
                  </li>
                </ul>
              <p>
                From this, we get the following rewriting relation for <code>~</code>:</p>
              <code class="hl lean block" data-lean-context="exercises"><span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.inductive-28444" data-verso-hover="0">inductive</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExpT" data-verso-hover="75">ExpT</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="68">α</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="unknown token" data-binding="">(</span><span class="const token" data-binding="const-ExpT" data-verso-hover="75">ExpT</span> <span class="var token" data-binding="var-_uniq.5" data-verso-hover="68">α</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="sort token" data-binding="">Prop</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convrT.refl" data-verso-hover="76">refl</span>  <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.19" data-verso-hover="77">e</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.19" data-verso-hover="77">e</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convrT.sym" data-verso-hover="78">sym</span>   <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.31" data-verso-hover="79">e</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.38" data-verso-hover="79">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.38" data-verso-hover="79">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.31" data-verso-hover="79">e</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convrT.trans" data-verso-hover="80">trans</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.56" data-verso-hover="81">e</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.63" data-verso-hover="81">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.63" data-verso-hover="81">e'</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.73" data-verso-hover="81">e''</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.56" data-verso-hover="81">e</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.73" data-verso-hover="81">e''</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convrT.K" data-verso-hover="82">K</span>     <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.101" data-verso-hover="83">K</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.113" data-verso-hover="84">x</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.249" data-verso-hover="85">y</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.113" data-verso-hover="84">x</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convrT.S" data-verso-hover="86">S</span>     <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.376" data-verso-hover="87">S</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.391" data-verso-hover="88">x</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.508" data-verso-hover="89">y</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.625" data-verso-hover="90">z</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.391" data-verso-hover="88">x</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.625" data-verso-hover="90">z</span> <span class="unknown token" data-binding="">⬝</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.508" data-verso-hover="89">y</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.625" data-verso-hover="90">z</span><span class="unknown token" data-binding="">)</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convrT.app" data-verso-hover="91">app</span>   <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.965" data-verso-hover="92">a</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.972" data-verso-hover="92">b</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.982" data-verso-hover="93">c</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.993" data-verso-hover="93">d</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">→</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.965" data-verso-hover="92">a</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.982" data-verso-hover="93">c</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.972" data-verso-hover="92">b</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.993" data-verso-hover="93">d</span><span class="unknown token" data-binding="">)</span>
<span class="unknown token" data-binding="">|</span> <span class="const token" data-binding="const-convrT.recN_zero" data-verso-hover="94">recN_zero</span> <span class="unknown token" data-binding="">:</span> <span class="const token" data-binding="const-convrT" data-verso-hover="74">convrT</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1238" data-verso-hover="95">recN</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.1253" data-verso-hover="96">e</span> <span class="unknown token" data-binding="">⬝</span> <span class="var token" data-binding="var-_uniq.1370" data-verso-hover="97">f</span> <span class="unknown token" data-binding="">⬝</span> <span class="const token" data-binding="const-ExpT.zero" data-verso-hover="71">.zero</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.1253" data-verso-hover="96">e</span><span class="unknown token" data-binding="">)</span>
--| recN_succ : convrT (recN ⬝ e ⬝ f ⬝ (.succ ⬝ n)) (f ⬝ n ⬝ (recN ⬝ e ⬝ f ⬝ n))
<span class="keyword token" data-binding="kw-occ-Lean.Parser.Command.infix-28964">infix</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">100</span> <span class="literal string token" data-binding="" data-verso-hover="23">" ~ "</span> <span class="unknown token" data-binding="">=&gt;</span> <span class="const token" data-binding="const-convrT" data-verso-hover="98">convrT</span>
<span class="unknown token" data-binding=""></span></code><p>
                <span id="--index"></span></p>
              </section>
            </section>
          <section>
            <h2 id="index">
              Index<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=index" title="Permalink">🔗</a></span></h2>
            <div class="theIndex">
              <nav>
                <ol>
                  <li>
                    <a href="#---index-hdr-I">I</a></li>
                  </ol>
                </nav>
              <div class="division">
                <h3 id="---index-hdr-I">
                  I</h3>
                <ol>
                  <li>
                    <a href="#--index"><span id="---entry-index">index</span></a></li>
                  </ol>
                </div>
              </div>
            </section>
          </section>
        </main></div>
    </body>
  </html>

